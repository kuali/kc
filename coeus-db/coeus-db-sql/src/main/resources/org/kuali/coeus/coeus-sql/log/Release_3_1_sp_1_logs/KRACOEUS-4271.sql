--add citizenship_type_code field to kc ente
ALTER TABLE "PERSON_EXT_T"
	ADD ( "CITIZENSHIP_TYPE_CODE" NUMBER(15,5) NULL ) 
/
--set default value for new field
UPDATE PERSON_EXT_T
SET CITIZENSHIP_TYPE_CODE = (SELECT CITIZENSHIP_TYPE_CODE FROM CITIZENSHIP_TYPE_T WHERE DESCRIPTION = 'US CITIZEN OR NONCITIZEN NATIONAL')
/
COMMIT
/
-- make constraint
ALTER TABLE "PERSON_EXT_T"
	ADD ( CONSTRAINT "PERSON_EXT_FK1"
	FOREIGN KEY("CITIZENSHIP_TYPE_CODE")
	REFERENCES "CITIZENSHIP_TYPE_T"("CITIZENSHIP_TYPE_CODE")
	 )
/
--make new field a non-null field
ALTER TABLE "PERSON_EXT_T" MODIFY ( "CITIZENSHIP_TYPE_CODE" NUMBER(15,5) NOT NULL )