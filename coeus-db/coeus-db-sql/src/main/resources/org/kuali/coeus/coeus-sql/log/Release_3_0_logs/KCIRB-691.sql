
-- Give IRB Admin role read privs on protocols.
INSERT INTO KRIM_ROLE_PERM_T
( ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND )
VALUES 
(10363, SYS_GUID(), 1, 1119, 1024,'Y' );



--PERMISSION TO VIEW PROTOCOL ONLINE REVIEW DOCUMENTS.
--PERMISSION IS ON THE PROTOCOL DOCUMENT.

INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND) 
values ('1227', SYS_GUID(), 1, '1001', 'KC-PROTOCOL', 'View Protocol Online Review Comments', 'View Protocol Online Review Comments', 'Y');

INSERT INTO KRIM_PERM_ATTR_DATA_T
( ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES
( 1300, SYS_GUID(), 1, 1227, 1006, 13, 'ProtocolDocument');

INSERT INTO KRIM_PERM_ATTR_DATA_T
( ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES
( 1301, SYS_GUID(), 1, 1227, 1006, 1003, 'reviewComments');

--ASSIGN PERM TO REVIEWER AND ADMIN
INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND)
VALUES
(10366,SYS_GUID(), 1, 1236, 1227, 'Y');

INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID,OBJ_ID,VER_NBR,ROLE_ID,PERM_ID,ACTV_IND)
VALUES
(10367,SYS_GUID(),1,1119,1227,'Y');



INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND) 
values ('1228', SYS_GUID(), 1, '1000', 'KC-PROTOCOL', 'Maintain Protocol Online Review Comments', 'Maintain Protocol Online Review Comments', 'Y');

INSERT INTO KRIM_PERM_ATTR_DATA_T
( ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES
( 1302, SYS_GUID(), 1, 1228, 1006, 13, 'ProtocolOnlineReviewDocument');

INSERT INTO KRIM_PERM_ATTR_DATA_T
( ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES
( 1303, SYS_GUID(), 1, 1228, 1006, 1003, 'reviewComments');

-- ASSIGN TO ADMIN AND REVIEWER
INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND)
VALUES
(10368,SYS_GUID(), 1, 1236, 1228, 'Y');

INSERT INTO KRIM_ROLE_PERM_T
(ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND)
VALUES
(10369,SYS_GUID(), 1, 1119, 1228, 'Y');



--Create the Approve online review responsibility for ProtocolOnlineReviewDocument and assign the responsibilty to IRB Administrator role.

INSERT INTO KRIM_RSP_T ( RSP_ID, OBJ_ID, VER_NBR, RSP_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND )
VALUES ( 1036, SYS_GUID(), 1, 1, 'KC-WKFLW', 'IRB Admin Approve Online Review', 'Protocol Online Review Document - IRB Admin approves online review', 'Y' );

INSERT INTO KRIM_ROLE_RSP_T ( ROLE_RSP_ID, OBJ_ID, VER_NBR, ROLE_ID, RSP_ID, ACTV_IND )
VALUES (  1036, SYS_GUID(), 1, 1119, 1036, 'Y' );

INSERT INTO KRIM_RSP_ATTR_DATA_T ( ATTR_DATA_ID, OBJ_ID, VER_NBR, RSP_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES ( 1410, SYS_GUID(), 1, 1036, 7, 13, 'ProtocolOnlineReviewDocument');

INSERT INTO KRIM_RSP_ATTR_DATA_T ( ATTR_DATA_ID, OBJ_ID, VER_NBR, RSP_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES ( 1411, SYS_GUID(), 1, 1036, 7, 16, 'IRBAdminReview');

INSERT INTO KRIM_RSP_ATTR_DATA_T ( ATTR_DATA_ID, OBJ_ID, VER_NBR, RSP_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES ( 1412, SYS_GUID(), 1, 1036, 7, 40, 'false');

INSERT INTO KRIM_RSP_ATTR_DATA_T ( ATTR_DATA_ID, OBJ_ID, VER_NBR, RSP_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES ( 1413, SYS_GUID(), 1, 1036, 7, 41, 'false');

INSERT INTO KRIM_ROLE_RSP_ACTN_T ( ROLE_RSP_ACTN_ID, OBJ_ID, VER_NBR, ACTN_TYP_CD, PRIORITY_NBR, ACTN_PLCY_CD, ROLE_MBR_ID, ROLE_RSP_ID, FRC_ACTN )
VALUES ( 1036, SYS_GUID(), 1, 'A',1,'F','*',1036,'N' );

--CREATE THE MAINTAIN PROTOCOL ONLINE REVIEWS PERMISSION

INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND) 
values ('1229', SYS_GUID(), 1, '1001', 'KC-PROTOCOL', 'Maintain Protocol Online Reviews', 'Maintain Protocol Online Reviews', 'Y');

--SELECT MAX( TO_NUMBER(ATTR_DATA_ID)) FROM KRIM_PERM_ATTR_DATA_T
INSERT INTO KRIM_PERM_ATTR_DATA_T
( ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES
( 1304, SYS_GUID(), 1, 1229, 1006, 13, 'ProtocolDocument');

INSERT INTO KRIM_PERM_ATTR_DATA_T
( ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL )
VALUES
( 1305, SYS_GUID(), 1, 1229,1006,1003,'onlineReviews');

--ASSIGN MAINTAIN PROTOCOL ONLINE REVIEWS TO IRB Admin role.
INSERT INTO KRIM_ROLE_PERM_T
( ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND )
VALUES
(10364, SYS_GUID(), 1, 1119, 1229, 'Y' );




