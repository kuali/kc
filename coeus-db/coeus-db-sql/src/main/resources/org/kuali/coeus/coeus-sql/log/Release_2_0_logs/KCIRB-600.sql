CREATE SEQUENCE SEQ_BATCH_CORRESPONDENCE INCREMENT BY 1 START WITH 1;

DROP TABLE BATCH_CORRESPONDENCE_DETAIL;

-- Table Script 
CREATE TABLE BATCH_CORRESPONDENCE_DETAIL ( 
    BATCH_CORRESPONDENCE_DETAIL_ID NUMBER(12,0) NOT NULL, 
    BATCH_CORRESPONDENCE_TYPE_CODE VARCHAR2(3) NOT NULL, 
    -- The CORRESPONDENCE_NUMBER is an artifact from the Coeus system.
    -- While it is not used it remains for backward equivalency.
    CORRESPONDENCE_NUMBER NUMBER(3,0), 
    PROTO_CORRESP_TYPE_CODE VARCHAR2(3) NOT NULL, 
    NO_OF_DAYS_TILL_NEXT NUMBER(3,0) NOT NULL, 
    UPDATE_TIMESTAMP DATE NOT NULL, 
    UPDATE_USER VARCHAR2(60) NOT NULL, 
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);


-- Primary Key Constraint 
ALTER TABLE BATCH_CORRESPONDENCE_DETAIL 
ADD CONSTRAINT PK_BATCH_CORRESPONDENCE_DETAIL 
PRIMARY KEY (BATCH_CORRESPONDENCE_DETAIL_ID);

-- *************** MODIFIED PRIMARY KEY COLUMN - Introduced new primary key for existing composite key ************ 
-- ALTER TABLE BATCH_CORRESPONDENCE_DETAIL 
-- ADD CONSTRAINT PK_BATCH_CORRESPONDENCE_DETAIL 
-- PRIMARY KEY (BATCH_CORRESPONDENCE_TYPE_CODE, CORRESPONDENCE_NUMBER);
-- *************** MODIFIED PRIMARY KEY COLUMN - Introduced new primary key for existing composite key ************ 
 

-- *************** UNIQUE CONSTRAINT DEFINED FOR COMPOSITE KEY COLUMNS ************ 
--ALTER TABLE BATCH_CORRESPONDENCE_DETAIL 
--ADD CONSTRAINT UQ_BATCH_CORRESPONDENCE_DETAIL 
--UNIQUE (BATCH_CORRESPONDENCE_TYPE_CODE, CORRESPONDENCE_NUMBER);

-- Foreign Key Constraint(s)
ALTER TABLE BATCH_CORRESPONDENCE_DETAIL 
ADD CONSTRAINT FK_BATCH_CORRESPONDENCE_DETAIL 
FOREIGN KEY (PROTO_CORRESP_TYPE_CODE) 
REFERENCES PROTO_CORRESP_TYPE (PROTO_CORRESP_TYPE_CODE);


-- KIM Permissions
insert into KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND) values ('1224', '95F7D32053EF4F868C1612FA94FFF635', 1, '16', 'KC-PROTOCOL', 'Modify Batch Correspondence Detail', 'Modify Batch Correspondence Detail', 'Y');
insert into KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD,NM, DESC_TXT, ACTV_IND) values ('1225', 'F35D259D139C401EB7F74E94A8DFA3B7', 1, '40', 'KC-PROTOCOL', 'View Batch Correspondence Detail', 'View Batch Correspondence Detail', 'Y');

insert into KRIM_PERM_ATTR_DATA_T (ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL) values ('1165', '6314CC58CF59B7B5E0404F8189D81170', 1, '1224', '3', '13', 'BatchCorrespondenceDetailMaintenanceDocument');
insert into KRIM_PERM_ATTR_DATA_T (ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL) values ('1166', '6314CC58CF59B7B5E0404F8189D81171', 1, '1225', '3', '13', 'BatchCorrespondenceDetailMaintenanceDocument');

insert into KRIM_ROLE_PERM_T (ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND) values ('10220', 'C1FB853F1FF0435DB3D1DAA0D161C921', 1, '1119', '1224', 'Y');
insert into KRIM_ROLE_PERM_T (ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND) values ('10221', '16061ABBF4C94191B4A10C0F178E0E57', 1, '1120', '1225', 'Y');

commit;


