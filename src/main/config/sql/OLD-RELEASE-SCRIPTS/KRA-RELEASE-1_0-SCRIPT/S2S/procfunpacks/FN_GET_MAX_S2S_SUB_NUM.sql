CREATE OR REPLACE FUNCTION FN_GET_MAX_S2S_SUB_NUM (
    AW_PROPOSAL_NUMBER  IN OSP$S2S_APP_SUBMISSION.PROPOSAL_NUMBER%TYPE)

    RETURN number

IS
    li_Subm_Number OSP$S2S_APP_SUBMISSION.SUBMISSION_NUMBER%TYPE;

BEGIN

  SELECT
    MAX(SUBMISSION_NUMBER)
  INTO
    li_Subm_Number
  FROM
    OSP$S2S_APP_SUBMISSION
  WHERE
    PROPOSAL_NUMBER = AW_PROPOSAL_NUMBER ;

  IF li_Subm_Number IS NULL THEN
    li_Subm_Number := 0 ;
  END IF;

  RETURN li_Subm_Number ;

  EXCEPTION
    WHEN NO_DATA_FOUND THEN
	RETURN 0;
END;
/

