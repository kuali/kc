CREATE OR REPLACE PROCEDURE GET_S2S_SUB_DETAILS (
    AW_PROPOSAL_NUMBER IN  OSP$S2S_APP_SUBMISSION.PROPOSAL_NUMBER%TYPE,
    CUR_GENERIC     IN OUT RESULT_SETS.CUR_GENERIC )

IS
BEGIN

  OPEN CUR_GENERIC FOR
    SELECT
		SUB.PROPOSAL_NUMBER,
		SUB.SUBMISSION_NUMBER,
		SUB.COMMENTS,
		SUB.GG_TRACKING_ID,
		SUB.AGENCY_TRACKING_ID,
		SUB.RECEIVED_DATE,
		SUB.LAST_MODIFIED_DATE,
		SUB.STATUS,
		SUB.UPDATE_TIMESTAMP,
		SUB.UPDATE_USER
    FROM
		OSP$S2S_APP_SUBMISSION SUB
    WHERE
      SUB.PROPOSAL_NUMBER = AW_PROPOSAL_NUMBER AND
	  SUB.SUBMISSION_NUMBER = (SELECT MAX(SUBMISSION_NUMBER)
	  						  		  FROM OSP$S2S_APP_SUBMISSION
									  WHERE	  PROPOSAL_NUMBER = AW_PROPOSAL_NUMBER);
END;
/

