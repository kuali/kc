create or replace procedure GetNSFPrevAward (AS_PROPOSAL_NUMBER IN OSP$EPS_PROPOSAL.PROPOSAL_NUMBER%TYPE,
     cur_generic IN OUT result_sets.cur_generic) IS

BEGIN																
  OPEN cur_generic for
	SELECT	DECODE(A.SPONSOR_AWARD_NUMBER,NULL,' ',A.SPONSOR_AWARD_NUMBER) AWARD
	FROM		OSP$AWARD A, OSP$EPS_PROPOSAL P
	WHERE		P.PROPOSAL_NUMBER = as_proposal_number
	AND      P.CURRENT_AWARD_NUMBER = A.MIT_AWARD_NUMBER 
   AND      A.SEQUENCE_NUMBER = (SELECT MAX(SEQUENCE_NUMBER) FROM OSP$AWARD WHERE
													MIT_AWARD_NUMBER = A.MIT_AWARD_NUMBER);


end;

/



